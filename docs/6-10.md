# 여러 필드(ex. 제목, 내용)에서 검색 키워드가 포함된 데이터를 조회하고 싶을 때(multi-match)
## ✅ 여러 필드에서 검색 키워드가 포함된 데이터를 조회하고 싶을 때(multi-match)
```
DELETE /boards

PUT /boards
{
    "mappings": {
        "properties": {
            "title": {
                "type": "text",
                "analyzer": "nori"
            },
            "content": {
                "type": "text",
                "analyzer": "nori"
            }
        }
    }
}

// title, content 둘 다에 키워드 포함
POST /boards/_doc
{
    "title": "엘라스틱서치 적용 후기",
    "content": "회사 프로젝트에 엘라스틱서치를 적용한 후기를 공유합니다."
}

// title에만 키워드 포함
POST /boards/_doc
{
    "title": "엘라스틱서치 사용해보니",
    "content": "검색 엔진 도입 후 성능이 향상되었습니다."
}

// content에만 키워드 포함
POST /boards/_doc
{
    "title": "검색엔진 도입 사례",
    "content": "이번 프로젝트에 엘라스틱서치를 적용한 후 많은 개선 효과가 있었습니다."
}

// title, content 둘다 포함 안됨
POST /boards/_doc
{
    "title": "레디스 캐시 사용기",
    "content": "서비스 속도 개선을 위해 캐시 시스템을 사용했습니다."
}

GET /boards/_search
{
    "query": {
        "multi_match": {
            "query": "엘라스틱서치 적용 후기",
            "fields": ["title", "content"]
        }
    }
}
```
* `title` 또는 `content` 필드에 검색 키워드가 포함된 데이터를 조회했다.
  * `title`이랑 `content` 둘 다에 키워드가 포함되지 않은 데이터는 제외됐다.
* 검색 키워드와 데이터 관련성을 score를 매겨 조회했다.
  * 검색 키워드가 문서에 자주 등장할 수록 점수가 높게 책정된다.
  * 전체 문서 중 검색어가 희귀한 검색어가 일치할 수록 점수가 높게 책정된다.
  * 필드 값의 길이가 작은데도 불구하고 키워드가 등장했다면 점수가 높게 책정된다.

## ✅ 가중치 활용해서 검색해 보기
`내용(content)`에만 키워드가 포함된 글보다 `제목(title)`에만 키워드가 포함된 글을 더 상위 노출 시키고 싶을 수 있다.
즉, `제목(title)`에 검색 키워드가 등장한다면 더 관련성 높은 데이터라고 판단하고 싶을 수 있다. 그럴 때 가중치를 활용한다.

```
// title에 2배 더 높은 score를 부여
GET /boards/_search
{
    "query": {
        "multi_match": {
            "query": "엘라스틱서치 적용 후기",
            "fields": ["title^2", "content"]
        }
    }
}
```