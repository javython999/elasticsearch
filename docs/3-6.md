# 대소문자 구분없이 검색하는 방법(lowercase)
## ✅ 대소문자 구분없이 검색하는 방법
1. Custom Analyzer를 활용해 인덱스 생성
```
// 기존 인덱스 삭제
DELETE /products

// 인덱스 생성 + 매핑 정의 + Custom Analyzer 적용
PUT /products
{
    "settings": {
        "analysis: {
            "products_name_analyzer": {
                "char_filter": [],
                "tokenizer": "standard",
                "filter: ["lowercase"]
            }
        }
    },
    "mappings": {
        "properties": {
            "name": {
                "type": "text",
                "analyzer": "products_name_analyzer"
            }
        }
    }
}

// 데이터 삽입
POST /products/_create/1
{
    "name": "Apple 2025 맥북 에어 13 M4 10코어"
}


// 검색
GET /products/_search
{
    "query": {
        "match": {
            "name": "apple"
        }
    }
}
```

## ✅ 정리
도큐먼트를 생성할 때 Analyzer가 문자열을 토큰으로 분리해 역인덱스를 생성한다.
그런데 검색을 할 때도 Analyzer가 검색어로 입력한 문자열을 토큰으로 분리해 검색한다.
이 때문에 `Apple`이라고 검색어를 입력하더라도 `lowercase token filter`에 의해 `apple`로 바뀐 채로 검색을 하게 된다.
결론적으로 Analyzer에서 `lowercase token filter`를 활용함으로써 대소문자에 상관없이 데이터를 검색할 수 있게 된 것이다.